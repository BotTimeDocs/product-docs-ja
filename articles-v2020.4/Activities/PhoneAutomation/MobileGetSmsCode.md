# SMS確認コードを取得
携帯電話のSMS確認コード情報を取得します。
> **説明:**
> 現在はAndriodの携帯だけをサポートしています。

## プロパティ

### 基本
- **実行前の待機時間(ミリ秒)** ：このアクティビティの実行前の待ち時間を指定します。単位はミリ秒（ms）です。
- **実行後の待機時間(ミリ秒)** ：このアクティビティの実行後の待ち時間を指定します。単位はミリ秒（ms）です。

- **エラー発生時に実行を継続** ：このアクティビティが実行失敗した場合、エラーを無視して次のアクティビティを実行するかどうかを設定します。プルダウンフレーム選択に"はい"を選択すると、このアクティビティが実行中にエラーが発生した場合、プロセスは次のアクティビティを実行し続け、停止しません。"いいえ"を選択した場合、このアクティビティが実行中にエラーが発生した場合、プロセスは実行を停止し、エラーをスローします。

- **表示名** ：デフォルトはこのアクティビティの名前です。このアクティビティの表示名の変更、カスタマイズがサポートされています。

### 入力
- **開始時間** ：日付タイプの変数を入力して、その時点以降のSMSの内容をフィルタリングします。
- **タイムアウト(秒)** ：この時間でポーリングを行い、結果に一致したら確認コード情報を返します。マッチングタイムアウトの場合はアクティビティの実行が失敗します。デフォルトでタイムアウトが60秒となります。

### オプション
- **ソース番号** ：SMS確認コードのソース番号を確認します。
- **正則マッチ** ：メッセージの内容をマッチするための正規表現をサポートします。
    > **説明:**
    >
    > ここに記載されている正規表現は、取得した確認コード（例えば、548721）のみに対して正規マッチする。

### 出力
- **確認コード** ：取得した確認コードの内容。

## 操作サンプル

1. デバイスに接続アクティビティをプロセスにドラッグ。具体的は[デバイスに接続アクティビティ-操作サンプル](/articles-v2020.4/Activities/PhoneAutomation/MobileConnect.md)を参照してください。
2. デバイスに接続アクティビティ内で手順に従ってプロセスを構築。下図のように。
   ![流程图](https://docimages.blob.core.chinacloudapi.cn/images/Activities/workflowsmscode20201230.jpg)

3. プロセスにおける各アクティビティを設定、以下は説明。
    - **アプリケーションを開く** ：指定された要素をクリックして、開く携帯電話のアプリケーションを選択。
    - **代入** ：DateTimeタイプの変数を定義し、今の時間を取得、例えば、Starttime = System.DateTime.Now
    - **クリック** ：携帯電話でのアプリケーションの確認コードを送信ボタンを指定。
    - **SMS確認コードを取得** ：SMS確認コードを取得の入力と出力のプロパティを設定。
    ![SMS確認コードを取得を設定](https://docimages.blob.core.chinacloudapi.cn/images/Activities/smscodevarials20201230.png)
    - **ログに書き込み** ：確認コード情報を出力。
4. プロセスを保存して実行。
5. 実行中、携帯端末で以下の効果が見られる。
   ![携帯端末效果](https://docimages.blob.core.chinacloudapi.cn/images/Activities/runprocesssmscode20201230.png)

6. アウトプットボックスでも実行結果が表示される。
   ![运行结果](https://docimages.blob.core.chinacloudapi.cn/images/Activities/resultsmscode20201230.png)

## よくある問題
1. Q：なぜSMSの確認コードが取れないですか？
   <br>A：携帯の確認コードのセキュリティ保護が禁止されているかどうかを確認する。スイッチがオンになったら、確認コードが取得できません。
   ![短信安全设置](https://docimages.blob.core.chinacloudapi.cn/images/Activities/smssetting20201230.png)   